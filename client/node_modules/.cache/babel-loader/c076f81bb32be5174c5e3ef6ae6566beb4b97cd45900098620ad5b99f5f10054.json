{"ast":null,"code":"import _regeneratorRuntime from \"C:/Baocao/english-quiz-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Baocao/english-quiz-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Baocao/english-quiz-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"C:\\\\Baocao\\\\english-quiz-app\\\\client\\\\src\\\\components\\\\Login.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Container, Paper, TextField, Button, Typography, makeStyles } from '@material-ui/core';\nimport { useAuth } from '../context/AuthContext';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    paper: {\n      marginTop: theme.spacing(8),\n      padding: theme.spacing(4),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    form: {\n      width: '100%',\n      marginTop: theme.spacing(1)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2)\n    }\n  };\n});\nvar Login = function Login() {\n  _s();\n  var classes = useStyles();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useAuth = useAuth(),\n    login = _useAuth.login;\n  var history = useHistory();\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n      var response, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            _context.prev = 1;\n            _context.next = 4;\n            return fetch('http://localhost:5000/api/login', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                email: email,\n                password: password\n              })\n            });\n          case 4:\n            response = _context.sent;\n            _context.next = 7;\n            return response.json();\n          case 7:\n            data = _context.sent;\n            if (response.ok) {\n              login(data.token);\n              history.push('/');\n            } else {\n              setError(data.message);\n            }\n            _context.next = 14;\n            break;\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](1);\n            setError('Failed to login');\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[1, 11]]);\n    }));\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.paper,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        children: \"Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, _this), error && /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        variant: \"body2\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          label: \"Email Address\",\n          autoComplete: \"email\",\n          autoFocus: true,\n          value: email,\n          onChange: function onChange(e) {\n            return setEmail(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          label: \"Password\",\n          type: \"password\",\n          autoComplete: \"current-password\",\n          value: password,\n          onChange: function onChange(e) {\n            return setPassword(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, _this);\n};\n_s(Login, \"2q3AqxRkY5RQjcOupn/aFCYe71s=\", false, function () {\n  return [useStyles, useAuth, useHistory];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Container","Paper","TextField","Button","Typography","makeStyles","useAuth","useHistory","jsxDEV","_jsxDEV","useStyles","theme","paper","marginTop","spacing","padding","display","flexDirection","alignItems","form","width","submit","margin","Login","_s","classes","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","_useAuth","login","history","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","JSON","stringify","sent","json","ok","token","push","message","t0","stop","_x","apply","arguments","component","maxWidth","children","className","variant","fileName","_jsxFileName","lineNumber","columnNumber","_this","color","onSubmit","required","fullWidth","label","autoComplete","autoFocus","value","onChange","target","type","_c","$RefreshReg$"],"sources":["C:/Baocao/english-quiz-app/client/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { \r\n  Container, \r\n  Paper, \r\n  TextField, \r\n  Button, \r\n  Typography, \r\n  makeStyles \r\n} from '@material-ui/core';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    padding: theme.spacing(4),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  form: {\r\n    width: '100%',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nconst Login = () => {\r\n  const classes = useStyles();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const { login } = useAuth();\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      // Thay thế bằng API call thực tế\r\n      const response = await fetch('http://localhost:5000/api/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        login(data.token);\r\n        history.push('/');\r\n      } else {\r\n        setError(data.message);\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to login');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Paper className={classes.paper}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        {error && (\r\n          <Typography color=\"error\" variant=\"body2\">\r\n            {error}\r\n          </Typography>\r\n        )}\r\n        <form className={classes.form} onSubmit={handleSubmit}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"Email Address\"\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}